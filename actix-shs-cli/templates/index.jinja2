<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <style>
      a { text-decoration:none; }
      td > a.link-directory { font-weight: bold; }
    </style>
  </head>
  <body>
    <form style="margin-top:1em; margin-bottom:1em;"
          action="/{{ directory.as_str() }}"
          method="POST"
          enctype="multipart/form-data">
      <input type="file" name="files" accept="*" multiple />
      <input type="submit" value="Upload" />
    </form>
    <div>
      <a href="/"><strong>[Root]</strong></a>
      {% for item in breadcrumb %}
        <a href="/{{ item.link }}/"><strong>{{ item.label }}</strong></a>
      {% endfor %}
    </div>
    <hr />
    <table>
      <tr>
        <th><a href="{{ current_link }}?sort=name&order=asc">Name</a></th>
        <th><a href="{{ current_link }}?sort=modified&order=asc">Last modified</a></th>
        <th><a href="{{ current_link }}?sort=size&order=asc">Size</a></th>
      </tr>
      <tr><td style="border-top:1px dashed #BBB;" colspan="5"></td></tr>
      {% if up_link.exists %}
        <tr>
          <td><a href="{{ up_link.link }}"><strong>{{ up_link.label }}</strong></a></td>
          <td></td>
          <td></td>
        </tr>
      {% else %}
        <tr><td>&nbsp;</td></tr>
      {% endif %}
      {% for row in rows %}
        <tr>
          <td>
            <a class="{{ row.link_class.as_str() }}" href="{{ row.link.as_str() }}">
              {%- if row.file_type == "directory" -%}
                {{ row.filename.as_str() }}/
              {%- else if row.file_type == "file" -%}
                {{ row.filename.as_str() }}
              {%- else -%}
                unsupported file type
              {%- endif -%}
            </a>
          </td>
          <td style="color:#888;">[{{ row.modified.as_str() }}]</td>
          <td><bold>{{ row.filesize.as_str() }}</bold></td>
        </tr>
      {% endfor %}
    </table>
  </body>
</html>
